{"version":3,"sources":["webpack:///C:/Code/Self/HBuilder/wechatGit/main.js","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue?e5fc","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue?6e23","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue?bf40","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue?5612","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue?a0e6","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue?5b62"],"names":["createPage","Page","Tourist","name","mobile","certNo","mixins","keyboardPopupMixin","mobileMixin","data","input","items","ticketTypeId","quantity","travelDate","contactName","contactMobile","contactCert","tourists","ticketType","dailyPrices","groundChangCis","minBuyNum","maxBuyNum","showDescription","saving","submited","showTourist","firstTourist","currentTouristIndex","editTourist","errorTouristIndex","computed","refundClass","className","allowRefund","refundLimited","classObj","refundIcon","refundText","price","priceObj","find","p","date","priceResult","totalMoney","submitText","editTouristTitle","watch","val","oldVal","hasGroundChangCi","loading","ticketTypeService","getTicketTypeChangCiComboboxItemsAsync","setGroundChangCiDefaultValue","loaded","console","log","touristInfoType","diff","i","push","length","onLoad","event","getTicketTypeForWeiXinSaleAsync","disable","pageLoaded","beforeRouteLeave","to","from","next","meta","shouldNotConfirm","$dialog","confirm","title","showCancelButton","confirmButtonText","cancelButtonText","then","catch","methods","onQuantityChange","$nextTick","toastHelper","noneToast","onTouristEdit","index","tourist","$refs","touristPopup","open","onTouristSave","validateTourist","findIndex","t","close","onSubmit","groundChangCi","changCiId","changCis","disabled","groundName","needTouristMobile","validateRules","value","rules","rule","validateResult","success","message","needTouristName","needCert","Math","max","min","createOrder","forEach","displayText","map","g","groundId","promoterId","orderService","createWeiXinOrderAsync","result","shouldPay","uni","setStorageSync","redirectTo","url","listNo"],"mappings":"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","file":"pages/ticket/buy-ticket.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/ticket/buy-ticket.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buy-ticket.vue?vue&type=template&id=576f42fb&scoped=true&\"\nvar renderjs\nimport script from \"./buy-ticket.vue?vue&type=script&lang=js&\"\nexport * from \"./buy-ticket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buy-ticket.vue?vue&type=style&index=0&id=576f42fb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"576f42fb\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Code/Self/HBuilder/wechatGit/pages/ticket/buy-ticket.vue\"\nexport default component.exports","export * from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=template&id=576f42fb&scoped=true&\"","var components = {\n  \"date-selector\": function() {\n    return import(\n      /* webpackChunkName: \"components/date-selector/date-selector\" */ \"@/components/date-selector/date-selector.vue\"\n    )\n  },\n  \"uni-number-box\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-number-box/uni-number-box\" */ \"@/components/uni-number-box/uni-number-box.vue\"\n    )\n  },\n  \"picker-field\": function() {\n    return import(\n      /* webpackChunkName: \"components/picker-field/picker-field\" */ \"@/components/picker-field/picker-field.vue\"\n    )\n  },\n  \"ticket-type-description\": function() {\n    return import(\n      /* webpackChunkName: \"components/ticket-type-description/ticket-type-description\" */ \"@/components/ticket-type-description/ticket-type-description.vue\"\n    )\n  },\n  \"uni-popup\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.price.toFixed(2)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showDescription = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.showTourist = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport { mapState } from 'vuex';\r\nimport ticketTypeService from './../../services/ticketTypeService.js';\r\nimport orderService from './../../services/orderService.js';\r\nimport validate from '@/utils/validator.js';\r\nimport toastHelper from '@/utils/toastHelper.js';\r\nimport { keyboardPopupMixin } from './../../mixins/KeyboardPopupMixin.js';\r\nimport { mobileMixin } from './../../mixins/mobileMixin.js';\r\n\r\nclass Tourist {\r\n\tconstructor() {\r\n\t\tthis.name = '';\r\n\t\tthis.mobile = '';\r\n\t\tthis.certNo = '';\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tmixins: [keyboardPopupMixin, mobileMixin],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tinput: {\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tticketTypeId: this.ticketTypeId,\r\n\t\t\t\t\t\tquantity: 1\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\ttravelDate: '',\r\n\t\t\t\tcontactName: '',\r\n\t\t\t\tcontactMobile: '',\r\n\t\t\t\tcontactCert: ''\r\n\t\t\t},\r\n\t\t\tquantity: 1,\r\n\t\t\ttourists: [],\r\n\t\t\tticketType: {\r\n\t\t\t\tdailyPrices: [],\r\n\t\t\t\tgroundChangCis: []\r\n\t\t\t},\r\n\t\t\tminBuyNum: 1,\r\n\t\t\tmaxBuyNum: 1000,\r\n\t\t\tshowDescription: false,\r\n\t\t\tsaving: false,\r\n\t\t\tsubmited: false,\r\n\t\t\tshowTourist: false,\r\n\t\t\tfirstTourist: new Tourist(),\r\n\t\t\tcurrentTouristIndex: -1,\r\n\t\t\teditTourist: {},\r\n\t\t\terrorTouristIndex: -1,\r\n\t\t\tticketTypeId: 0\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\trefundClass() {\r\n\t\t\tlet className = 'info';\r\n\t\t\tif (this.ticketType.allowRefund === false) {\r\n\t\t\t\tclassName = 'error';\r\n\t\t\t} else if (this.ticketType.refundLimited) {\r\n\t\t\t\tclassName = 'warning';\r\n\t\t\t}\r\n\t\t\tlet classObj = {};\r\n\t\t\tclassObj[className] = true;\r\n\t\t\treturn classObj;\r\n\t\t},\r\n\t\trefundIcon() {\r\n\t\t\tif (this.ticketType.allowRefund === false) {\r\n\t\t\t\treturn 'close';\r\n\t\t\t}\r\n\t\t\treturn this.ticketType.refundLimited ? 'info-o' : 'passed';\r\n\t\t},\r\n\t\trefundText() {\r\n\t\t\tif (this.ticketType.allowRefund === false) {\r\n\t\t\t\treturn '不可退';\r\n\t\t\t}\r\n\t\t\treturn this.ticketType.refundLimited ? '有条件退' : '随时退';\r\n\t\t},\r\n\t\tprice() {\r\n\t\t\tconst priceObj = this.ticketType.dailyPrices.find(p => p.date == this.input.travelDate);\r\n\t\t\tlet priceResult = priceObj ? priceObj.price : 0;\r\n\t\t\treturn priceResult;\r\n\t\t},\r\n\t\ttotalMoney() {\r\n\t\t\treturn this.price * this.quantity * 100;\r\n\t\t},\r\n\t\tsubmitText() {\r\n\t\t\treturn this.totalMoney > 0 ? '去支付' : '提交订单';\r\n\t\t},\r\n\t\teditTouristTitle() {\r\n\t\t\tif (this.editTourist.name || this.editTourist.mobile || this.editTourist.certNo) {\r\n\t\t\t\treturn '编辑';\r\n\t\t\t}\r\n\t\t\treturn '新增';\r\n\t\t},\r\n\t\t...mapState(['promoterId'])\r\n\t},\r\n\twatch: {\r\n\t\t'input.travelDate': async function(val, oldVal) {\r\n\t\t\tif (!oldVal) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.ticketType.hasGroundChangCi) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading();\r\n\r\n\t\t\t\tthis.ticketType.groundChangCis = await ticketTypeService.getTicketTypeChangCiComboboxItemsAsync(this.ticketTypeId, val);\r\n\t\t\t\tthis.setGroundChangCiDefaultValue();\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loaded();\r\n\t\t\t}\r\n\t\t},\r\n\t\tquantity: function(val, oldVal) {\r\n\t\t\tconsole.log(val);\r\n\t\t\tif (this.ticketType.touristInfoType != 3) return;\r\n\r\n\t\t\tconst diff = val - oldVal;\r\n\t\t\tif (diff > 0) {\r\n\t\t\t\tfor (let i = 0; i < diff; i++) {\r\n\t\t\t\t\tthis.tourists.push(new Tourist());\r\n\t\t\t\t}\r\n\t\t\t\tif (val == 1) {\r\n\t\t\t\t\tthis.firstTourist = this.tourists[0];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.tourists.length += diff;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tasync onLoad(event) {\r\n\t\tthis.ticketTypeId = event.ticketTypeId;\r\n\t\tthis.input.items[0].ticketTypeId = event.ticketTypeId;\r\n\t\ttry {\r\n\t\t\tthis.loading();\r\n\r\n\t\t\tthis.ticketType = await ticketTypeService.getTicketTypeForWeiXinSaleAsync(this.ticketTypeId);\r\n\r\n\t\t\tthis.minBuyNum = this.ticketType.minBuyNum > 1 ? this.ticketType.minBuyNum : 1;\r\n\t\t\tthis.maxBuyNum = this.ticketType.maxBuyNum > 1 ? this.ticketType.maxBuyNum : 1000;\r\n\t\t\tthis.quantity = this.minBuyNum;\r\n\r\n\t\t\tconst priceObj = this.ticketType.dailyPrices.find(p => !p.disable);\r\n\t\t\tif (priceObj) {\r\n\t\t\t\tthis.input.travelDate = priceObj.date;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setGroundChangCiDefaultValue();\r\n\r\n\t\t\tif (this.ticketType.touristInfoType == 3) {\r\n\t\t\t\tthis.tourists.push(this.firstTourist);\r\n\t\t\t}\r\n\r\n\t\t\tthis.pageLoaded = true;\r\n\t\t} finally {\r\n\t\t\tthis.loaded();\r\n\t\t}\r\n\t},\r\n\tbeforeRouteLeave(to, from, next) {\r\n\t\tif (this.showTourist) {\r\n\t\t\tthis.showTourist = false;\r\n\t\t\tnext(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.submited || to.meta.shouldNotConfirm) {\r\n\t\t\tnext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$dialog\r\n\t\t\t.confirm({\r\n\t\t\t\ttitle: '确认离开订单填写页？',\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonText: '离开',\r\n\t\t\t\tcancelButtonText: '取消'\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\tnext();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tnext(false);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tonQuantityChange(val) {\r\n\t\t\tif (val < this.minBuyNum) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.quantity = this.minBuyNum;\r\n\t\t\t\t\ttoastHelper.noneToast(`至少需购买${this.minBuyNum}份`);\r\n\t\t\t\t});\r\n\t\t\t} else if (val > this.maxBuyNum) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.quantity = this.maxBuyNum;\r\n\t\t\t\t\ttoastHelper.noneToast(`最多购买${this.maxBuyNum}份`);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouristEdit(index) {\r\n\t\t\tthis.currentTouristIndex = index;\r\n\t\t\tconst tourist = this.tourists[index];\r\n\t\t\tthis.editTourist = { ...tourist };\r\n\t\t\tthis.$refs.touristPopup.open();\r\n\t\t},\r\n\t\tonTouristSave() {\r\n\t\t\tif (!this.validateTourist(this.editTourist)) return;\r\n\r\n\t\t\tconst index = this.tourists.findIndex(t => t.certNo == this.editTourist.certNo);\r\n\t\t\tif (index >= 0 && index != this.currentTouristIndex) {\r\n\t\t\t\ttoastHelper.noneToast('身份证已添加');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.tourists[this.currentTouristIndex] = { ...this.editTourist };\r\n\t\t\tif (this.currentTouristIndex == 0) {\r\n\t\t\t\tthis.firstTourist = this.tourists[0];\r\n\t\t\t}\r\n\t\t\tthis.$refs.touristPopup.close();\r\n\t\t},\r\n\t\tasync onSubmit() {\r\n\t\t\tif (this.ticketType.groundChangCis.length > 0) {\r\n\t\t\t\tfor (const groundChangCi of this.ticketType.groundChangCis) {\r\n\t\t\t\t\tif (!groundChangCi.changCiId) {\r\n\t\t\t\t\t\tif (groundChangCi.changCis.length === 1 && groundChangCi.changCis[0].disabled) {\r\n\t\t\t\t\t\t\ttoastHelper.noneToast(groundChangCi.groundName + '暂无可售场次');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttoastHelper.noneToast('请选择' + groundChangCi.groundName + '场次');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.ticketType.touristInfoType == 3) {\r\n\t\t\t\tfor (let i = 0; i < this.tourists.length; i++) {\r\n\t\t\t\t\tconst tourist = this.tourists[i];\r\n\t\t\t\t\tif (!this.validateTourist(tourist)) {\r\n\t\t\t\t\t\tthis.errorTouristIndex = i;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.errorTouristIndex = -1;\r\n\r\n\t\t\t\tif (!this.ticketType.needTouristMobile) {\r\n\t\t\t\t\tconst validateRules = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue: this.input.contactMobile,\r\n\t\t\t\t\t\t\tname: '联系手机',\r\n\t\t\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isMobile' }]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\t\t\t\t\tlet validateResult = validate(validateRules);\r\n\t\t\t\t\tif (!validateResult.success) {\r\n\t\t\t\t\t\ttoastHelper.noneToast(validateResult.message);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.ticketType.touristInfoType == 2) {\r\n\t\t\t\tconst validateRules = [];\r\n\t\t\t\tif (this.ticketType.needTouristName) {\r\n\t\t\t\t\tvalidateRules.push({\r\n\t\t\t\t\t\tvalue: this.input.contactName,\r\n\t\t\t\t\t\tname: '姓名',\r\n\t\t\t\t\t\trules: [{ rule: 'required' }]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (this.ticketType.needTouristMobile) {\r\n\t\t\t\t\tvalidateRules.push({\r\n\t\t\t\t\t\tvalue: this.input.contactMobile,\r\n\t\t\t\t\t\tname: '联系手机',\r\n\t\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isMobile' }]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (this.ticketType.needCert) {\r\n\t\t\t\t\tvalidateRules.push({\r\n\t\t\t\t\t\tvalue: this.input.contactCert,\r\n\t\t\t\t\t\tname: '身份证',\r\n\t\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isIdCard' }]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet validateResult = validate(validateRules);\r\n\t\t\t\tif (!validateResult.success) {\r\n\t\t\t\t\ttoastHelper.noneToast(validateResult.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.quantity = Math.max(this.minBuyNum, this.quantity);\r\n\t\t\tthis.quantity = Math.min(this.maxBuyNum, this.quantity);\r\n\t\t\tawait this.createOrder();\r\n\t\t},\r\n\t\tsetGroundChangCiDefaultValue() {\r\n\t\t\tif (!this.ticketType.groundChangCis || this.ticketType.groundChangCis.length <= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.ticketType.groundChangCis.forEach(groundChangCi => {\r\n\t\t\t\tif (groundChangCi.changCis.length == 0) {\r\n\t\t\t\t\tgroundChangCi.changCis.push({\r\n\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\tdisplayText: '暂无可售场次',\r\n\t\t\t\t\t\tdisabled: true\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (groundChangCi.changCis.length == 1) {\r\n\t\t\t\t\tgroundChangCi.changCiId = groundChangCi.changCis[0].value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tvalidateTourist(tourist) {\r\n\t\t\tconst rules = [];\r\n\t\t\tif (this.ticketType.needTouristName) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalue: tourist.name,\r\n\t\t\t\t\tname: '姓名',\r\n\t\t\t\t\trules: [{ rule: 'required' }]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.ticketType.needTouristMobile) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalue: tourist.mobile,\r\n\t\t\t\t\tname: '手机号码',\r\n\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isMobile' }]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.ticketType.needCert) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalue: tourist.certNo,\r\n\t\t\t\t\tname: '身份证',\r\n\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isIdCard' }]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tlet validateResult = validate(rules);\r\n\t\t\tif (!validateResult.success) {\r\n\t\t\t\ttoastHelper.noneToast(validateResult.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tasync createOrder() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.input.items[0].quantity = this.quantity;\r\n\t\t\t\tthis.input.items[0].tourists = this.tourists;\r\n\t\t\t\tthis.input.items[0].groundChangCis = this.ticketType.groundChangCis.map(g => {\r\n\t\t\t\t\treturn { groundId: g.groundId, changCiId: g.changCiId };\r\n\t\t\t\t});\r\n\t\t\t\tthis.input.promoterId = this.promoterId;\r\n\r\n\t\t\t\tthis.saving = true;\r\n\t\t\t\tconst result = await orderService.createWeiXinOrderAsync(this.input);\r\n\t\t\t\tthis.submited = true;\r\n\t\t\t\tif (result.shouldPay) {\r\n\t\t\t\t\tuni.setStorageSync('Pay:Product', this.ticketType.name);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (result.shouldPay) {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/payment/wx-js-pay?listNo=' + result.listNo\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/order/order-detail?listNo=' + result.listNo\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=style&index=0&id=576f42fb&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=style&index=0&id=576f42fb&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586911629814\n      var cssReload = require(\"C:/迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}