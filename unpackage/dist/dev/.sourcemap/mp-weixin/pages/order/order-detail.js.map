{"version":3,"sources":["webpack:///C:/Code/Self/HBuilder/wechatGit/main.js","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue?2131","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue?20d5","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue?08fe","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue?c436","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue?9d43","webpack:///C:/Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue?c26a"],"names":["createPage","Page","data","orderInfo","details","currentBarcode","countdownText","timer","saving","isLoadingData","allowLeave","computed","statusInfo","orderStatusName","allowCancel","shouldPay","totalMoney","refundText","changCiOrderDetails","filter","detail","groundChangCis","length","onLoad","event","listNo","loadData","onPullDownRefresh","beforeRouteLeave","to","from","next","clearInterval","methods","getOrderInfo","startCountdown","uni","showLoading","duration","title","orderService","getOrderInfoForMobileAsync","order","hasContact","contact","contactName","contactCertNo","contactMobile","generateQRCodeAsync","hideLoading","hasDetail","hasTicket","tickets","ticket","isUsable","qrcodeHelper","createQRCodeAsync","ticketCode","qrcode","endTime","countdown","clone","addSeconds","expireSeconds","formatStr","format","setInterval","subtract","isSame","onBarcodeClick","isBarcodeCollapse","pay","navigateTo","url","refund","cancelOrder","showModal","content","cancelResult","confirm","cancelOrderAsync","response","success","toastHelper","noneToast","buyAgain","switchTab","refundDetail","enrollFace"],"mappings":"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","file":"pages/order/order-detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/order/order-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order-detail.vue?vue&type=template&id=091a7c3c&scoped=true&\"\nvar renderjs\nimport script from \"./order-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./order-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order-detail.vue?vue&type=style&index=0&id=091a7c3c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"091a7c3c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Code/Self/HBuilder/wechatGit/pages/order/order-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-detail.vue?vue&type=template&id=091a7c3c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.orderInfo.details, function(detail, index) {\n    var l0 = _vm.__map(detail.tickets, function(ticket, index) {\n      var m0 = _vm.isBarcodeCollapse(ticket)\n      var m1 = _vm.isBarcodeCollapse(ticket)\n      var m2 = _vm.isBarcodeCollapse(ticket)\n      return {\n        $orig: _vm.__get_orig(ticket),\n        m0: m0,\n        m1: m1,\n        m2: m2\n      }\n    })\n\n    return {\n      $orig: _vm.__get_orig(detail),\n      l0: l0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-detail.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport dayjs from 'dayjs';\r\nimport qrcodeHelper from './../../utils/qrcodeHelper.js';\r\nimport orderService from '@/services/orderService.js';\r\nimport toastHelper from \"@/utils/toastHelper.js\";\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\torderInfo: { details: [] },\r\n\t\t\tcurrentBarcode: '',\r\n\t\t\tcountdownText: '',\r\n\t\t\ttimer: -1,\r\n\t\t\tsaving: false,\r\n\t\t\tisLoadingData: false,\r\n\t\t\tallowLeave: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tstatusInfo() {\r\n\t\t\tswitch (this.orderInfo.orderStatusName) {\r\n\t\t\t\tcase '待付款': {\r\n\t\t\t\t\treturn '库存有限，请尽快完成付款';\r\n\t\t\t\t}\r\n\t\t\t\tcase '退款中': {\r\n\t\t\t\t\treturn '退款申请已提交，我们将尽快为您处理';\r\n\t\t\t\t}\r\n\t\t\t\tcase '已取消': {\r\n\t\t\t\t\treturn '您的订单已取消，欢迎重新预订';\r\n\t\t\t\t}\r\n\t\t\t\tcase '已审核': {\r\n\t\t\t\t\treturn '预订已成功，祝您出游愉快';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t},\r\n\t\tallowCancel() {\r\n\t\t\treturn this.orderInfo.shouldPay || this.orderInfo.totalMoney == 0;\r\n\t\t},\r\n\t\trefundText() {\r\n\t\t\treturn this.allowCancel ? '申请取消' : '申请退款';\r\n\t\t},\r\n\t\tchangCiOrderDetails() {\r\n\t\t\treturn this.orderInfo.details.filter(detail => detail.groundChangCis && detail.groundChangCis.length > 0);\r\n\t\t}\r\n\t},\r\n\tasync onLoad(event) {\r\n\t\tthis.listNo = event.listNo;\r\n\t\tawait this.loadData();\r\n\t},\r\n\tasync onPullDownRefresh() {\r\n\t\tawait this.loadData();\r\n\t},\r\n\tasync beforeRouteLeave(to, from, next) {\r\n\t\tif (this.allowLeave) {\r\n\t\t\tnext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tclearInterval(this.timer);\r\n\r\n\t\tnext();\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadData() {\r\n\t\t\tawait this.getOrderInfo();\r\n\t\t\tthis.startCountdown();\r\n\t\t},\r\n\t\tasync getOrderInfo() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.isLoadingData = true;\r\n\t\t\t\tthis.currentBarcode = '';\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tduration: 0,\r\n\t\t\t\t\ttitle: '加载中...'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet order = await orderService.getOrderInfoForMobileAsync(this.listNo);\r\n\t\t\t\torder.hasContact = order.contact.contactName || order.contact.contactCertNo || order.contact.contactMobile;\r\n\t\t\t\tawait this.generateQRCodeAsync(order);\r\n\r\n\t\t\t\tthis.orderInfo = order;\r\n\t\t\t} catch (err) {\r\n\t\t\t\treturn;\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tthis.isLoadingData = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync generateQRCodeAsync(order) {\r\n\t\t\torder.hasDetail = order.details && order.details.length > 0;\r\n\t\t\tif (!order.hasDetail) return;\r\n\r\n\t\t\tfor (let detail of order.details) {\r\n\t\t\t\tdetail.hasTicket = detail.tickets && detail.tickets.length > 0;\r\n\t\t\t\tif (!detail.hasTicket) continue;\r\n\r\n\t\t\t\tfor (let ticket of detail.tickets) {\r\n\t\t\t\t\tif (!ticket.isUsable) continue;\r\n\r\n\t\t\t\t\tticket.qrcode = await qrcodeHelper.createQRCodeAsync(ticket.ticketCode);\r\n\t\t\t\t\tif (!this.currentBarcode) {\r\n\t\t\t\t\t\tthis.currentBarcode = ticket.ticketCode;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tstartCountdown() {\r\n\t\t\tclearInterval(this.timer);\r\n\r\n\t\t\tif (!this.orderInfo.shouldPay) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst endTime = dayjs('2018-01-01 00:00:00');\r\n\t\t\tlet countdown = endTime.clone().addSeconds(this.orderInfo.expireSeconds);\r\n\r\n\t\t\tconst formatStr = this.orderInfo.expireSeconds > 3600 ? 'HH:mm:ss' : 'mm:ss';\r\n\t\t\tthis.countdownText = countdown.format(formatStr);\r\n\r\n\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\tcountdown = countdown.subtract(1, 'seconds');\r\n\t\t\t\tthis.countdownText = countdown.format(formatStr);\r\n\t\t\t\tif (countdown.isSame(endTime)) {\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\tthis.getOrderInfo();\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\tonBarcodeClick(ticket) {\r\n\t\t\tthis.currentBarcode = ticket.ticketCode;\r\n\t\t},\r\n\t\tisBarcodeCollapse(ticket) {\r\n\t\t\treturn this.currentBarcode !== ticket.ticketCode;\r\n\t\t},\r\n\t\tpay() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/payment/wx-js-pay?listNo=' + this.listNo\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync refund() {\r\n\t\t\tif (this.allowCancel) {\r\n\t\t\t\tawait this.cancelOrder();\r\n\t\t\t} else {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/order/refund-ticket?listNo=' + this.listNo\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync cancelOrder() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.saving = true;\r\n\t\t\t\tlet cancelResult = await uni.showModal({\r\n\t\t\t\t\tcontent: '确定取消订单？'\r\n\t\t\t\t});\r\n\t\t\t\tif (cancelResult[1].confirm) {\r\n\t\t\t\t\tlet response = await orderService.cancelOrderAsync(this.listNo);\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\ttoastHelper.noneToast('取消成功');\r\n\t\t\t\t\t\tawait this.getOrderInfo();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\treturn;\r\n\t\t\t} finally {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbuyAgain() {\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/index/index'\r\n\t\t\t});\r\n\t\t},\r\n\t\trefundDetail() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/order/refnd-detail?listNo=' + this.listNo\r\n\t\t\t});\r\n\t\t},\r\n\t\tenrollFace() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/member/enroll-face?listNo=' + this.listNo\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-detail.vue?vue&type=style&index=0&id=091a7c3c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-detail.vue?vue&type=style&index=0&id=091a7c3c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586911629464\n      var cssReload = require(\"C:/迅雷下载/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}